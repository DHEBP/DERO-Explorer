({
name:'smartcontracts',
v:'1.0.0',
renderSmartContracts:function(x){
return Promise.resolve('<div class="enhanced-card"><div class="card-header"><h2 style="color: #fff; font-size: 1.6rem; font-weight: 700; margin: 0;">Smart Contract Explorer</h2><div class="section-info" style="color: #b3b3b3; font-size: 0.9rem; margin-top: 0.5rem;">Explore DERO smart contracts</div></div><div class="card-content"><h3 style="color: #52c8db; margin-bottom: 1rem; font-size: 1.2rem; font-weight: 600;">Search Smart Contract</h3><div class="search-bar" style="margin: 1.5rem 0; display: flex; gap: 0.75rem; align-items: stretch;"><input type="text" id="scid-input" placeholder="Enter Smart Contract ID (SCID) - 64 character hash..." maxlength="64" style="flex: 1; padding: 0.85rem 1rem; border: 1px solid rgba(82,200,219,0.3); background: rgba(0,0,0,0.4); color: #fff; border-radius: 8px; font-family: monospace; font-size: 0.9rem; outline: none; transition: all 0.2s ease; box-sizing: border-box; height: 3.2rem;" onkeydown="if(event.key===\'Enter\')searchSC()" onfocus="this.style.borderColor=\'#52c8db\'; this.style.background=\'rgba(0,0,0,0.5)\'; this.style.boxShadow=\'0 0 0 3px rgba(82,200,219,0.2)\';" onblur="this.style.borderColor=\'rgba(82,200,219,0.3)\'; this.style.background=\'rgba(0,0,0,0.4)\'; this.style.boxShadow=\'none\';" /><button onclick="searchSC()" style="background: rgba(82,200,219,0.15); border: 1px solid #52c8db; color: #52c8db; padding: 0.85rem 1.5rem; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-weight: 600; font-size: 0.9rem; white-space: nowrap; box-sizing: border-box; height: 3.2rem; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.background=\'rgba(82,200,219,0.25)\'; this.style.borderColor=\'#4dd4db\'; this.style.color=\'#4dd4db\';" onmouseout="this.style.background=\'rgba(82,200,219,0.15)\'; this.style.borderColor=\'#52c8db\'; this.style.color=\'#52c8db\';">Search Contract</button></div><div class="how-to-section"><h3 style="color: #52c8db; margin-bottom: 1rem; font-size: 1.2rem; font-weight: 600;">How to Find Smart Contracts</h3><div class="info-card" style="background: rgba(82,200,219,0.05); border: 1px solid rgba(82,200,219,0.2); border-radius: 8px; padding: 1.5rem; border-left: 4px solid #52c8db;"><p style="margin-bottom: 1rem; color: #fff; line-height: 1.5;">Smart contracts require specific SCIDs to search. Here are some ways to find them:</p><ul style="color: #b3b3b3; margin-left: 1.5rem; line-height: 1.6;"><li style="margin-bottom: 0.5rem;">Look for SC transactions in the transaction explorer</li><li style="margin-bottom: 0.5rem;">Check recent blocks for smart contract deployments</li><li style="margin-bottom: 0.5rem;">DERO smart contracts use 64-character hexadecimal SCIDs</li><li style="margin-bottom: 0.5rem; color: #52c8db; font-family: monospace; font-size: 0.85rem;">Example SCID: 813b020791998dbefafb72e89c812f8cb0b9c04efbe11963a1ca140e2da72eb9</li></ul></div></div></div></div>')
},
renderSCDetails:function(scid,x){
if(!scid||scid.length!==64){
return Promise.resolve('<div class="enhanced-card"><div class="card-header"><h2 style="color: #52c8db; font-size: 1.6rem; font-weight: 700; margin: 0;">Invalid SCID Format</h2></div><div class="card-content"><div class="error-card" style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; border-left: 4px solid #ef4444;"><h3 style="color: #ef4444; margin-bottom: 1rem;">Invalid Smart Contract ID</h3><p style="color: #fff; margin-bottom: 1rem;">Smart Contract IDs must be exactly 64 hexadecimal characters.</p><p style="color: #b3b3b3; margin-bottom: 1.5rem;">Provided: <code style="color: #ef4444; background: rgba(0,0,0,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace;">'+(scid||'empty')+'</code></p><div class="error-actions"><button onclick="location.hash=\'smartcontracts\'" style="background: rgba(82,200,219,0.1); border: 1px solid #52c8db; color: #52c8db; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">← Back to Search</button></div></div></div></div>')
}
return x('DERO.GetSC',{scid:scid,code:true,variables:true}).then(function(sc){
if(!sc){
return '<div class="enhanced-card"><div class="card-header"><h2 style="color: #52c8db; font-size: 1.6rem; font-weight: 700; margin: 0;">Smart Contract Not Found</h2></div><div class="card-content"><div class="error-card" style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; border-left: 4px solid #ef4444;"><h3 style="color: #ef4444; margin-bottom: 1rem;">Contract Not Found</h3><p style="color: #fff; margin-bottom: 1.5rem;">No smart contract found with SCID: <code style="color: #52c8db; background: rgba(0,0,0,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace;">'+scid.substring(0,10)+'...</code></p><div class="error-actions" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;"><button onclick="location.hash=\'smartcontracts\'" style="background: rgba(82,200,219,0.1); border: 1px solid #52c8db; color: #52c8db; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">← Back to Search</button><button onclick="location.reload()" style="background: rgba(255,193,7,0.1); border: 1px solid #ffc107; color: #ffc107; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">Try Again</button></div></div></div></div>'
}
var vars=sc.stringkeys||{};
var varCount=Object.keys(vars).length;
var balance=sc.balance||0;
var codeLength=sc.code?sc.code.length:0;
var varRows='';
var keys=Object.keys(vars);
for(var i=0;i<Math.min(keys.length,15);i++){
var k=keys[i];
var v=vars[k];
var val=typeof v==='string'?v:JSON.stringify(v);
if(val.length>50)val=val.substring(0,47)+'...';
varRows+='<tr><td style="font-family:monospace;font-size:0.9rem">'+k+'</td><td style="font-family:monospace;font-size:0.9rem">'+val+'</td></tr>'
}
var varSection=varCount>0?'<div style="margin: 2rem 0;"><h3 style="color: #52c8db; margin-bottom: 1rem; font-size: 1.2rem; font-weight: 600;">Contract Variables ('+varCount+')</h3><div style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; overflow: hidden;"><div style="display: grid; grid-template-columns: 1fr 1fr; background: rgba(0,0,0,0.3); border-bottom: 1px solid rgba(82,200,219,0.3);"><div style="padding: 1rem; font-weight: 600; color: #b3b3b3; border-right: 1px solid rgba(82,200,219,0.3);">Variable</div><div style="padding: 1rem; font-weight: 600; color: #b3b3b3;">Value</div></div>'+varRows.replace(/<tr>/g,'<div style="display: grid; grid-template-columns: 1fr 1fr; border-bottom: 1px solid rgba(82,200,219,0.1);">').replace(/<\/tr>/g,'</div>').replace(/<td style="font-family:monospace;font-size:0.9rem">/g,'<div style="padding: 0.75rem; font-family: monospace; font-size: 0.9rem; color: #fff; border-right: 1px solid rgba(82,200,219,0.1);">').replace(/<\/td>/g,'</div>')+(varCount>15?'<div style="grid-column: 1 / -1; padding: 0.75rem; text-align: center; color: #b3b3b3; font-style: italic;">... and '+(varCount-15)+' more variables</div>':'')+'</div></div>':'<div style="margin: 2rem 0; text-align: center; background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 2rem;"><p style="color: #b3b3b3; font-style: italic;">No public variables found in this smart contract.</p></div>';
var codeSection='';
if(sc.code&&sc.code.length>0){
var code=sc.code.substring(0,1500);
var trunc=sc.code.length>1500?' ... (truncated)':'';
codeSection='<div style="margin: 2rem 0;"><h3 style="color: #52c8db; margin-bottom: 1rem; font-size: 1.2rem; font-weight: 600;">Contract Code</h3><div style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; max-height: 400px; overflow-y: auto;"><pre style="margin: 0; font-family: monospace; font-size: 0.85rem; line-height: 1.5; color: #fff; white-space: pre-wrap; background: transparent;">'+code+trunc+'</pre></div></div>'
}
return '<div class="enhanced-card"><div class="card-header" style="text-align:center"><h2 style="color: #52c8db; font-size: 1.6rem; font-weight: 700; margin: 0;">Smart Contract Details</h2><div style="color: #b3b3b3; font-size: 0.9rem; margin-top: 0.5rem;">DERO Virtual Machine Contract</div></div><div class="card-content"><div class="scid-display" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; word-break: break-all;"><div style="color: #b3b3b3; font-size: 0.9rem; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">Smart Contract ID</div><div style="font-family: monospace; color: #52c8db; font-size: 1.1rem; line-height: 1.4;">'+scid+'</div></div><div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 1rem; margin: 1.5rem 0;"><div class="enhanced-stat-card" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; transition: all 0.2s ease;"><div class="stat-value" style="font-size: 1.5rem; font-weight: 700; color: #4ade80; margin-bottom: 0.5rem;">'+(balance/100000).toFixed(5)+' DERO</div><div class="stat-label" style="color: #b3b3b3; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Balance</div></div><div class="enhanced-stat-card" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; transition: all 0.2s ease;"><div class="stat-value" style="font-size: 1.5rem; font-weight: 700; color: #52c8db; margin-bottom: 0.5rem;">'+varCount+'</div><div class="stat-label" style="color: #b3b3b3; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Variables</div></div><div class="enhanced-stat-card" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; transition: all 0.2s ease;"><div class="stat-value" style="font-size: 1.5rem; font-weight: 700; color: #52c8db; margin-bottom: 0.5rem;">'+(codeLength<1024?codeLength+' B':(codeLength/1024).toFixed(1)+' KB')+'</div><div class="stat-label" style="color: #b3b3b3; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Code Size</div></div><div class="enhanced-stat-card" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(82,200,219,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; transition: all 0.2s ease;"><div class="stat-value" style="font-size: 1.5rem; font-weight: 700; color: #4ade80; margin-bottom: 0.5rem;">Active</div><div class="stat-label" style="color: #b3b3b3; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Status</div></div></div>'+varSection+codeSection+'<div style="margin-top: 2rem; text-align: center;"><button onclick="location.hash=\'smartcontracts\'" style="background: rgba(82,200,219,0.1); border: 1px solid #52c8db; color: #52c8db; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">← Back to Smart Contracts</button></div></div></div>'
}).catch(function(e){
console.error('Error fetching smart contract:',e);
return '<div class="enhanced-card"><div class="card-header"><h2 style="color: #52c8db; font-size: 1.6rem; font-weight: 700; margin: 0;">Error Loading Smart Contract</h2></div><div class="card-content"><div class="error-card" style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 1.5rem; text-align: center; border-left: 4px solid #ef4444;"><h3 style="color: #ef4444; margin-bottom: 1rem;">Loading Error</h3><p style="color: #fff; margin-bottom: 1.5rem;">Failed to load smart contract: '+e.message+'</p><div class="error-actions" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;"><button onclick="location.hash=\'smartcontracts\'" style="background: rgba(82,200,219,0.1); border: 1px solid #52c8db; color: #52c8db; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">← Back to Search</button><button onclick="location.reload()" style="background: rgba(255,193,7,0.1); border: 1px solid #ffc107; color: #ffc107; padding: 0.75rem 1.5rem; border-radius: 6px; cursor: pointer; transition: all 0.2s ease; font-weight: 500;">Retry</button></div></div></div></div>'
})
},
searchSC:function(){
var input=document.getElementById('scid-input');
if(!input)return;
var scid=input.value.trim();
if(!scid){alert('Please enter a Smart Contract ID (SCID)');return}
if(scid.length!==64){alert('Smart Contract ID must be exactly 64 characters');return}
location.hash='sc/'+scid
}
})